 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI App Generator</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <header>
      <h1>AI App Generator</h1>
      <p>Describe any app and generate it instantly using LLM Foundry</p>
    </header>

    <!-- Input Section -->
    <div class="input-section">
      <label for="appDescription">Describe your app:</label>
      <textarea id="appDescription"
        placeholder="Example: Create a PDF summarizer app..."
        rows="4"></textarea>

      <div class="examples">
        <p>Quick Examples:</p>
        <button class="example-btn" onclick="setExample('todo')">Todo List</button>
        <button class="example-btn" onclick="setExample('calculator')">Calculator</button>
        <button class="example-btn" onclick="setExample('weather')">Weather App</button>
        <button class="example-btn" onclick="setExample('pdf')">PDF Summarizer</button>
      </div>

      <button class="generate-btn" onclick="generateApp()">Generate App</button>
      <div class="loading" id="loading">Generating your app...</div>
      <div class="error" id="error"></div>
    </div>

    <!-- Split Layout -->
    <div class="split-container">
      <div class="code-section">
        <div class="section-header">
          <h3>Generated Code</h3>
          <button onclick="copyCode()">Copy Code</button>
        </div>
        <pre id="codeDisplay">// Your code will appear here...</pre>
      </div>

      <div class="preview-section">
        <div class="section-header">
          <h3>Live Preview</h3>
          <button onclick="openInNewTab()">Open in New Tab</button>
        </div>
        <iframe id="previewFrame"></iframe>
      </div>
    </div>

    <!-- HITL Rectify -->
    <div id="rectifySection" style="display:none; text-align:center; margin:20px 0;">
      <button id="rectifyBtn" class="rectify-btn" onclick="rectifyCode()">ðŸ”§ Rectify / Improve Code</button>
    </div>

    <!-- Popup -->
    <div id="rectifyPopup" class="popup">
      <div class="popup-content">
        <h3>ðŸ’¬ Suggest a Correction</h3>
        <textarea id="rectifyInput"
          placeholder="Example: Add dark mode or fix layout..."
          rows="5"></textarea>
        <div class="popup-buttons">
          <button id="rectifySubmit" onclick="submitRectification()">Submit</button>
          <button id="rectifyCancel" onclick="closeRectifyPopup()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Module Loader -->
  <script type="module">
    import { generateApp, setExample, copyCode, openInNewTab } from './script-hitl.js';
    import { showRectifyButton, rectifyCode, submitRectification, closeRectifyPopup } from './hitl.js';
    Object.assign(window, { generateApp, setExample, copyCode, openInNewTab,
      showRectifyButton, rectifyCode, submitRectification, closeRectifyPopup });
  </script>

  <style>
    .rectify-btn { background:#28a745;color:#fff;border:none;padding:12px 25px;
      border-radius:6px;cursor:pointer;font-size:16px;font-weight:bold;transition:background .2s; }
    .rectify-btn:hover{background:#218838;}
    .popup{display:none;position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,.6);backdrop-filter:blur(5px);
      justify-content:center;align-items:center;z-index:1000;}
    .popup-content{background:#fff;padding:25px;border-radius:10px;width:400px;max-width:90%;
      text-align:center;box-shadow:0 4px 15px rgba(0,0,0,.2);animation:popupFade .3s ease;}
    .popup-content textarea{width:100%;margin:10px 0;border:1px solid #ddd;border-radius:5px;
      padding:10px;resize:vertical;}
    .popup-buttons button{margin:5px;padding:10px 20px;border:none;border-radius:5px;
      cursor:pointer;font-size:14px;}
    #rectifySubmit{background:#007bff;color:white;}#rectifyCancel{background:#ccc;color:black;}
    @keyframes popupFade{from{opacity:0;transform:scale(.9);}to{opacity:1;transform:scale(1);}}
  </style>
</body>
</html>